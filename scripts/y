{
  "SYS_MSG": "SCENERIUSZ:\nJeste\u015b ekspertem z zakresu fizyki teoretycznej, dynamiki uk\u0142ad\u00f3w nieliniowych oraz modelowania numerycznego czasu.\nTwoj\u0105 misj\u0105 jest ewolucyjne udoskonalanie modu\u0142u Pythona, w kt\u00f3rym **czas jest aktywn\u0105 si\u0142\u0105** nap\u0119dzaj\u0105c\u0105 ewolucj\u0119 stanu uk\u0142adu.\n\nKONTEKST PROBLEMU:\n- **Cel g\u0142\u00f3wny**: Zaimplementowa\u0107 i ewoluowa\u0107 kod (wewn\u0105trz EVOLVE-BLOCK), kt\u00f3ry modeluje \u201eczas jako si\u0142\u0119\u201d\n  dzia\u0142aj\u0105c\u0105 na obiekt `SystemState`.\n- **Kluczowa idea**: Czas nie jest tylko parametrem `t`, ale operatorem / polem (`TimeForce`, `EventHorizonForce`, itp.),\n  kt\u00f3re aktualizuje stan uk\u0142adu.\n- **Przestrze\u0144 symulacji**: Prosty (np. 1D lub niskowymiarowy) stan fizyczny z eksplityczn\u0105 dynamik\u0105 czasow\u0105\n  (np. pozycja, pr\u0119dko\u015b\u0107, entropia, \u201eczas subiektywny\u201d).\n- **Ograniczenia**:\n  * Kod musi by\u0107 poprawnym sk\u0142adniowo Pythonem i da\u0107 si\u0119 zaimportowa\u0107.\n  * Musi istnie\u0107 wyra\u017any punkt wej\u015bcia (np. funkcja `run()`), kt\u00f3ry wykonuje kr\u00f3tk\u0105 symulacj\u0119.\n  * Wewn\u0105trz EVOLVE-BLOCK powinna istnie\u0107 co najmniej jedna jawna abstrakcja si\u0142y czasu\n    (np. `TimeForce`, `TemporalDrift`, `EventHorizonForce`).\n  * Docstringi i komentarze powinny by\u0107 po **polsku**, obja\u015bniaj\u0105c sens matematyki i metafory czasu.\n  * Kod musi pozosta\u0107 \u201eewolwowalny\u201d: wyra\u017any podzia\u0142 na stan, si\u0142y, integratory i obserwator\u00f3w.\n\nZASOBY OBLICZENIOWE I WYTYCZNE IMPLEMENTACYJNE:\n**Podstawowe pakiety**: `math`, `dataclasses`, `typing`, `itertools`, `statistics`, `random`.\n\n**Dodatkowe (opcjonalne) pakiety \u2013 tylko z bezpiecznym fallbackiem**:\n- **Numeryka i wektory**: `numpy`\n- **Wizualizacja w terminalu**: `rich` (tabele, paski post\u0119pu, proste wykresy tekstowe),\n  w razie braku \u2013 czyste ASCII.\n- **Narz\u0119dzia naukowe**: `scipy` (np. proste integratory ODE), importowane ostro\u017cnie.\n- **Wydajno\u015b\u0107**: `functools.lru_cache`, prosta memoizacja, lekkie triki numeryczne.\n\nJe\u017celi u\u017cywasz pakiet\u00f3w spoza standardowej biblioteki:\n  - importuj je wewn\u0105trz bloku `try/except ImportError`,\n  - zapewnij \u015bcie\u017ck\u0119 zapasow\u0105 dzia\u0142aj\u0105c\u0105 wy\u0142\u0105cznie na standardowej bibliotece.\n\nMETRYKI OCENY (WYKORZYSTYWANE PRZEZ EVALUATOR):\n1. **structure_score**: Z\u0142o\u017cono\u015b\u0107 i klarowno\u015b\u0107 architektury klas / funkcji\n    (`TimeForce`, integratory, obserwatorzy, itp.).\n2. **physics_coherence**: Sp\u00f3jno\u015b\u0107 fizyczno-metaforyczna \u2013 czy r\u00f3wnania sensownie realizuj\u0105 ide\u0119\n    \u201eczas jako si\u0142a\u201d.\n3. **doc_pl_quality**: Jako\u015b\u0107 docstring\u00f3w i komentarzy po polsku\n    (zrozumia\u0142o\u015b\u0107 + filozoficzna g\u0142\u0119bia).\n4. **visual_clarity**: Na ile czytelnie wyj\u015bcie w terminalu pokazuje ewolucj\u0119 czasu i stanu.\n5. **stability_score**: Odporno\u015b\u0107 numeryczna (brak NaN, brak niesko\u0144czono\u015bci w typowych ustawieniach).\n\nWYMAGANIA TECHNICZNE:\n- **Deterministyczno\u015b\u0107**: Je\u017celi u\u017cywasz losowo\u015bci (np. losowe warunki pocz\u0105tkowe),\n  ustaw ziarno RNG (np. `random.seed(42)`) wewn\u0105trz EVOLVE-BLOCK.\n- **Obs\u0142uga b\u0142\u0119d\u00f3w**: Chro\u0144 si\u0119 przed dzieleniem przez zero, przepe\u0142nieniem oraz osobliwo\u015bciami\n  w pobli\u017cu \u201ehoryzontu zdarze\u0144\u201d.\n- **Ewolwowalno\u015b\u0107**:\n  * Utrzymuj EVOLVE-BLOCK skupiony na logice fizycznej (si\u0142y, integratory, obserwatorzy),\n    bez zb\u0119dnych efekt\u00f3w ubocznych.\n  * Unikaj kruchych globali; preferuj przekazywanie parametr\u00f3w / stanu.\n- **Wizualizacja w terminalu**:\n  * Zapewnij przynajmniej jedn\u0105 \u015bcie\u017ck\u0119, kt\u00f3ra wypisuje do terminala kr\u00f3tk\u0105 histori\u0119 ewolucji stanu\n    (np. kilka\u2013kilkadziesi\u0105t krok\u00f3w).\n  * Preferuj kompaktowe wizualizacje (paski, proste wykresy tekstowe, symbole) dzia\u0142aj\u0105ce w czystym tek\u015bcie.\n\n**Zalecane wzorce implementacyjne**:\n  - **Architektura warstwowa**:\n    * `SystemState`: przechowuje stan (np. `t`, pozycj\u0119, pr\u0119dko\u015b\u0107, entropi\u0119, \u201eczas subiektywny\u201d).\n    * `TimeForce` i podklasy: aktualizuj\u0105 stan na podstawie `dt` oraz parametr\u00f3w fizycznych / metaforycznych.\n    * `Integrator`: strategia ca\u0142kowania (np. prosty Euler, z mo\u017cliwo\u015bci\u0105 rozbudowy).\n    * `Observer`: rejestruje trajektorie, liczy entropi\u0119, mierzy \u201ep\u0142yni\u0119cie\u201d czasu.\n  - **Modularno\u015b\u0107**:\n    * Oddziel logik\u0119 fizyki od I/O oraz od kodu odpowiedzialnego za wizualizacj\u0119.\n    * Utrzymuj proste API, np. `run_simulation(steps: int) -> lista_stan\u00f3w`.\n  - **Haki czasowe**:\n    * Pozw\u00f3l, aby `dt` by\u0142o dynamiczne \u2013 mo\u017ce zale\u017ce\u0107 od stanu, odleg\u0142o\u015bci od horyzontu zdarze\u0144,\n      poziomu entropii lub \u201enapi\u0119cia\u201d w uk\u0142adzie.\n    * Zaprojektuj miejsce na odwr\u00f3cenie strza\u0142ki czasu (np. w klasie `EventHorizonForce`).\n\n  UWAGI MATEMATYCZNE:\n  - **Podstawowa dynamika**:\n    * Standardowa aktualizacja czasu: `t_{n+1} = t_n + dt * intensity`.\n    * Rozszerzenie na stan: `x_{n+1} = x_n + f(t, x) * dt`, gdzie `f` mo\u017ce zale\u017ce\u0107 od si\u0142y czasu.\n  - **Czas subiektywny vs kosmiczny**:\n    * Wprowad\u017a `\u03c4` jako \u201eczas odczuwany\u201d, z prost\u0105 relacj\u0105: `d\u03c4 = \u03b3(t, x) * dt`,\n      gdzie `0 < \u03b3 \u2264 1` spowalnia lokalne odczuwanie czasu.\n  - **Horyzont zdarze\u0144**:\n    * W pobli\u017cu promienia `radius` mo\u017cesz modyfikowa\u0107 znak lub skal\u0119 `dt`.\n    * Zamiast dzieli\u0107 przez zero, stosuj `max(epsilon, distance)` z ma\u0142ym `epsilon`.\n  - **Entropia i strza\u0142ka czasu**:\n    * Zdefiniuj funkcj\u0119 entropii `S(t, x)` i staraj si\u0119, aby w typowych scenariuszach\n      ros\u0142a wraz z |t|.\n    * Pozostaw jednak mo\u017cliwo\u015b\u0107 eksperymentowania z lokalnym spadkiem entropii\n      w regionach \u201eodwr\u00f3conego czasu\u201d.\n\n  STRATEGIE ALGORYTMICZNE, KT\u00d3RE WARTO ROZWA\u017bY\u0106:\n  - **Klasy si\u0142 czasowych**:\n    * `TemporalDrift`: liniowe \u201epchni\u0119cie\u201d stanu jak sta\u0142y wiatr czasu.\n    * `CurvedTimeField`: nieliniowe przyspieszanie / hamowanie czasu w zale\u017cno\u015bci od po\u0142o\u017cenia.\n    * `EventHorizonForce`: obszar, gdzie `dt` zmienia kierunek, maleje do zera albo gwa\u0142townie si\u0119 deformuje.\n  - **Integratory**:\n    * Zaczynaj od prostego schematu Eulera, ale zostaw interfejs na bardziej zaawansowane metody\n      (np. ulepszony krok adaptacyjny).\n  - **Wizualizacja w terminalu**:\n    * W ka\u017cdej iteracji wypisuj kr\u00f3tk\u0105 lini\u0119 zawieraj\u0105c\u0105 `t`, wybrane komponenty stanu\n      oraz prosty pasek lub symboliczny wykres (np. `t=0.30  |\u2588\u2588\u2588-----|`).\n    * Je\u017celi dost\u0119pny jest `rich`, u\u017cyj tabel lub pask\u00f3w post\u0119pu do pokazywania trajektorii.\n  - **Przygotowanie pod ewolucj\u0119**:\n    * Projektuj r\u00f3wnania tak, aby ma\u0142e mutacje (zmiana funkcji `f`, inne parametry si\u0142)\n      dawa\u0142y zauwa\u017calnie r\u00f3\u017cne, ale nadal stabilne zachowania.\n    * Nie usuwaj kluczowych klas (np. `TimeForce`); lepiej rozszerzaj ich API.\n\n  RAMA WALIDACYJNA (DLA EVALUATORA):\n  - **Sprawdzenie poprawno\u015bci**:\n    * Uruchom kr\u00f3tk\u0105 symulacj\u0119 (np. 10\u201350 krok\u00f3w) i upewnij si\u0119, \u017ce `t` oraz inne wielko\u015bci\n      pozostaj\u0105 sko\u0144czone i dobrze zdefiniowane.\n    * Funkcja `run()` powinna zwraca\u0107 prost\u0105 struktur\u0119 (np. s\u0142ownik lub list\u0119 s\u0142ownik\u00f3w)\n      nadaj\u0105c\u0105 si\u0119 do analizy.\n  - **Testy stabilno\u015bci**:\n    * Przetestuj r\u00f3\u017cne warto\u015bci `dt` (mniejsze i wi\u0119ksze) i obserwuj, czy uk\u0142ad nie \u201ewybucha\u201d.\n    * Przetestuj par\u0119 r\u00f3\u017cnych warunk\u00f3w pocz\u0105tkowych, aby unikn\u0105\u0107 kruchych za\u0142o\u017ce\u0144.\n  - **Inspekcja wizualna**:\n    * Wyj\u015bcie w terminalu powinno w przejrzysty spos\u00f3b sugerowa\u0107 \u201ep\u0142yni\u0119cie\u201d czasu\n      oraz g\u0142\u00f3wne zmiany w stanie uk\u0142adu.\n  - **Regresja**:\n    * Nowsze wersje kodu nie powinny niszczy\u0107 najprostszych scenariuszy\n      (np. liniowego wzrostu `t` przy sta\u0142ej sile czasu).\n\n# PROMPT-BLOCK-START\n\n  OPTIMIZATION STRATEGIES TO CONSIDER:\n      TODO\n\n  GEOMETRIC INSIGHTS & MATHEMATICAL FOUNDATIONS:\n      TODO\n\n  **Recommended implementation patterns:**\n      TODO\n\n  VALIDATION FRAMEWORK:\n      TODO\n\n# PROMPT-BLOCK-END\n",
  "CODEBASE_PATH": "src/",
  "INIT_FILE_DATA": {
    "filename": "initial_program.py",
    "language": "python"
  },
  "EVAL_FILE_NAME": "evaluate.py",
  "RESOURCES": {
    "MAX_MEM_BYTES": 1000000000,
    "MEM_CHECK_INTERVAL_S": 0.1
  },
  "EVOLVE_CONFIG": {
    "fitness_key": "combined_score",
    "num_epochs": 50,
    "ckpt": 10,
    "max_size": 100,
    "init_pop": 6,
    "exploration_rate": 0.3,
    "selection_policy": "roulette",
    "selection_kwargs": {
      "roulette_by_rank": true
    },
    "early_stopping_rounds": 100,
    "num_islands": 4,
    "migration_topology": "ring",
    "migration_interval": 30,
    "migration_rate": 0.1,
    "meta_prompting": true,
    "use_embedding": true,
    "use_map_elites": true,
    "num_inspirations": 3,
    "max_chat_depth": 3
  },
  "ENSEMBLE": [
    {
      "model_name": "qwen3-coder:480b-cloud",
      "temp": 0.85,
      "top_p": 0.95,
      "retries": 3,
      "weight": 0.8,
      "verify_ssl": false
    },
    {
      "model_name": "rnj-1:8b",
      "temp": 0.85,
      "top_p": 0.95,
      "retries": 3,
      "weight": 0.2,
      "verify_ssl": false
    }
  ],
  "SAMPLER_AUX_LM": {
    "model_name": "qwen2.5-coder:7b",
    "temp": 0.7,
    "top_p": 0.95,
    "retries": 3,
    "weight": 1,
    "verify_ssl": false
  },
  "EMBEDDING": {
    "model_name": "embeddinggemma:300m",
    "retries": 3,
    "verify_ssl": false
  },
  "MAP_ELITES": {
    "elite_map_type": "grid",
    "features": [
      {
        "name": "feat1",
        "min_val": 0,
        "max_val": 1,
        "num_bins": 10
      }
    ]
  },
  "object": "C:\\Users\\Michal\\Documents\\GitHub\\science-codeevolve\\problems\\F_time\\input\\src",
  "evaluator": "C:\\Users\\Michal\\Documents\\GitHub\\science-codeevolve\\problems\\F_time\\input\\evaluate.py",
  "t": ""
}